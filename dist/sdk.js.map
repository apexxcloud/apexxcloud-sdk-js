{"version":3,"file":"sdk.js","sources":["../src/sdk.js"],"sourcesContent":["class StorageSDK {\n  constructor(config = {}) {\n    this.config = {\n      baseUrl: config.baseUrl || \"https://api.apexxcloud.com\",\n    };\n\n    // Initialize API clients\n    this.files = {\n      upload: this.uploadFile.bind(this),\n      uploadMultipart: this.uploadMultipart.bind(this),\n    };\n  }\n\n  async uploadFile(\n    signedUrl,\n    file,\n    {\n      onProgress = () => {},\n      onComplete = () => {},\n      onError = () => {},\n      onStart = () => {},\n    } = {}\n  ) {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const xhr = new XMLHttpRequest();\n\n      // Setup progress tracking\n      xhr.upload.onprogress = (event) => {\n        if (event.lengthComputable) {\n          const percentComplete = (event.loaded / event.total) * 100;\n          onProgress({\n            loaded: event.loaded,\n            total: event.total,\n            progress: percentComplete,\n            type: \"progress\",\n          });\n        }\n      };\n\n      // Return promise for upload completion\n      return new Promise((resolve, reject) => {\n        xhr.open(\"POST\", signedUrl, true);\n\n        // Setup start handler\n        xhr.upload.onloadstart = (event) => {\n          onStart({\n            type: \"start\",\n            timestamp: new Date(),\n            file: {\n              name: file.name,\n              size: file.size,\n              type: file.type,\n            },\n          });\n        };\n\n        // Setup completion handler\n        xhr.onload = () => {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            try {\n              const response = JSON.parse(xhr.responseText);\n              onComplete({\n                type: \"complete\",\n                response,\n                timestamp: new Date(),\n              });\n              resolve(response);\n            } catch (e) {\n              onComplete({\n                type: \"complete\",\n                response: xhr.responseText,\n                timestamp: new Date(),\n              });\n              resolve(xhr.responseText);\n            }\n          } else {\n            const error = new Error(`Upload failed with status ${xhr.status}`);\n            onError({\n              type: \"error\",\n              error,\n              status: xhr.status,\n              timestamp: new Date(),\n            });\n            reject(error);\n          }\n        };\n\n        // Setup error handler\n        xhr.onerror = (event) => {\n          const error = new Error(\"Upload failed\");\n          onError({\n            type: \"error\",\n            error,\n            originalEvent: event,\n            timestamp: new Date(),\n          });\n          reject(error);\n        };\n\n        // Setup abort handler\n        xhr.onabort = (event) => {\n          const error = new Error(\"Upload aborted\");\n          onError({\n            type: \"abort\",\n            error,\n            originalEvent: event,\n            timestamp: new Date(),\n          });\n          reject(error);\n        };\n\n        xhr.send(formData);\n      });\n    } catch (error) {\n      onError({\n        type: \"error\",\n        error,\n        timestamp: new Date(),\n      });\n      throw new Error(`Upload failed: ${error.message}`);\n    }\n  }\n}\n\nexport default StorageSDK;\n"],"names":["StorageSDK","constructor","config","baseUrl","files","upload","uploadFile","bind","uploadMultipart","signedUrl","file","onProgress","onComplete","onError","onStart","formData","FormData","append","xhr","XMLHttpRequest","onprogress","event","lengthComputable","percentComplete","loaded","total","progress","type","Promise","resolve","reject","open","onloadstart","timestamp","Date","name","size","onload","status","response","JSON","parse","responseText","e","error","Error","onerror","originalEvent","onabort","send","message"],"mappings":"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"}